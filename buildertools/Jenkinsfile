pipeline
{
	agent any
	stages 
	{
		stage('Builder') 
		{
			environment
			{
				SAUCE_ACCESS = credentials('mydtr_cre')
			}
			steps 
			{
				// withCredentials([[$class: 'UsernamePasswordMultiBinding', credentialsId: 'mydtr_cre',
				// 		usernameVariable: 'USERNAME', passwordVariable: 'PASSWORD']]) 
				// {
				// 	script
				// 	{
				// 		MY_DTRID = "${env.USERNAME}"
				// 		MY_DTRPASSWORD = "${env.PASSWORD}"
				// 	}
				// }				
				script
				{
					//powershell 'docker build -f ${PWD}\\buildertools\\basicbuilder\\Dockerfile -t dcdevjbz/msbuilder15.4.8.50001_base:wincore1709 ${PWD}\\buildertools\\basicbuilder'
					powershell '${env:SAUCE_ACCESS_PSW} | docker login --username ${env:SAUCE_ACCESS_USR} --password-stdin'
				}
			}
		}
	}
}